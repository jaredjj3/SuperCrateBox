{"version":3,"sources":["webpack/bootstrap 968ad770915ef041d0be","./lib/SuperCrateBox.js","./lib/Resources.js","./lib/Player.js","./lib/Sprite.js","./lib/Input.js","./lib/util/SPRITES.js","./lib/util/STAGES.js","./lib/Wall.js","./lib/WallSprite.js","./lib/util/CONSTANTS.js","./lib/Crate.js","./lib/util/ENEMIES.js","./lib/Enemy.js"],"names":["ENEMIES","SPRITES","STAGES","CONSTANTS","SuperCrateBox","play","bind","main","_reset","update","render","_getRect","handleInput","renderEntity","_isReadyToJump","updateEntities","renderEntities","checkCollision","checkCollisions","checkPlayerBounds","lastTime","Date","now","_setup","gameOver","dt","requestAnimationFrame","player","crate","enemies","pos","input","window","isDown","isJumping","vel","PLAYER_VERTICAL_INIT_VEL","PLAYER_HORIZONTAL_VEL","PLAYER_HORIZONTAL_ACC","sprite","PLAYER_RUN_RIGHT","PLAYER_RUN_LEFT","PLAYER_IDLE","lastPos","GRAVITY","entity","walls","stage","collisionMap","rect1","i","length","otherEntity","rect2","collisionType","_collisionDetected","type","Math","random","_entityHitWall","score","scoreEl","className","CRATE","setTimeout","STAGE_1_CRATE_SPAWN","list","ctx","innerHTML","velocityEl","toFixed","positionEl","hitbox","clearRect","save","translate","restore","STAGE_1","canvas","document","getElementById","getContext","load","init","onReady","setup","ENEMY_1","collisionEl","x","y","width","height","jumpTiming","lastJumpTime","JUMP_TIME","_collisionRight","_collisionLeft","_collisionTop","_collisionBottom","l","r","t","b","leftSideOf1","rightSideOf1","leftSideOf2","rightSideOf2","topSideOf1","bottomSideOf1","topSideOf2","bottomSideOf2","scb","addEventListener","Resources","resourceCache","loading","readyCallbacks","_load","get","isReady","arg","forEach","url","ready","k","hasOwnProperty","func","push","img","Image","onload","callback","src","Player","opts","jumpNumber","Sprite","size","speed","frames","dir","once","facing","_index","frame","max","idx","floor","done","scale","drawImage","Input","pressedKeys","setKey","e","key","toUpperCase","indexOf","keyCode","preventDefault","event","status","code","String","fromCharCode","PLAYER_JUMP_RIGHT","PLAYER_JUMP_LEFT","WT","SLW1","MLW1","HO1","OW1","sample","seed","multiplier","Wall","concat","WallSprite","fillStyle","fillRect","ENEMY_ONE_VEL","Crate","Enemy"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;ACtCA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;KAAYA,O;;AACZ;;KAAYC,O;;AACZ;;KAAYC,M;;AACZ;;KAAYC,S;;;;;;;;;;KAENC,a;AACJ,4BAAc;AAAA;;AACZ,UAAKC,IAAL,GAAY,KAAKA,IAAL,CAAUC,IAAV,CAAe,IAAf,CAAZ;AACA,UAAKC,IAAL,GAAY,KAAKA,IAAL,CAAUD,IAAV,CAAe,IAAf,CAAZ;AACA,UAAKE,MAAL,GAAc,KAAKA,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAd;AACA,UAAKG,MAAL,GAAc,KAAKA,MAAL,CAAYH,IAAZ,CAAiB,IAAjB,CAAd;AACA,UAAKI,MAAL,GAAc,KAAKA,MAAL,CAAYJ,IAAZ,CAAiB,IAAjB,CAAd;AACA,UAAKK,QAAL,GAAgB,KAAKA,QAAL,CAAcL,IAAd,CAAmB,IAAnB,CAAhB;AACA,UAAKM,WAAL,GAAmB,KAAKA,WAAL,CAAiBN,IAAjB,CAAsB,IAAtB,CAAnB;AACA,UAAKO,YAAL,GAAoB,KAAKA,YAAL,CAAkBP,IAAlB,CAAuB,IAAvB,CAApB;AACA,UAAKQ,cAAL,GAAsB,KAAKA,cAAL,CAAoBR,IAApB,CAAyB,IAAzB,CAAtB;AACA,UAAKS,cAAL,GAAsB,KAAKA,cAAL,CAAoBT,IAApB,CAAyB,IAAzB,CAAtB;AACA,UAAKU,cAAL,GAAsB,KAAKA,cAAL,CAAoBV,IAApB,CAAyB,IAAzB,CAAtB;AACA,UAAKW,cAAL,GAAsB,KAAKA,cAAL,CAAoBX,IAApB,CAAyB,IAAzB,CAAtB;AACA,UAAKY,eAAL,GAAuB,KAAKA,eAAL,CAAqBZ,IAArB,CAA0B,IAA1B,CAAvB;AACA,UAAKa,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBb,IAAvB,CAA4B,IAA5B,CAAzB;AACD;;;;4BAEM;AACL,YAAKc,QAAL,GAAgBC,KAAKC,GAAL,EAAhB;AACA,YAAKC,MAAL;AACD;;;4BAEM;AACL,WAAI,KAAKC,QAAT,EAAmB;AACjB,cAAKhB,MAAL;AACA;AACD;AAJI,WAKGC,MALH,GAKsB,IALtB,CAKGA,MALH;AAAA,WAKWC,MALX,GAKsB,IALtB,CAKWA,MALX;;AAML,WAAMY,MAAMD,KAAKC,GAAL,EAAZ;AACA,WAAMG,KAAK,CAACH,MAAM,KAAKF,QAAZ,IAAwB,MAAnC;;AAEAX,cAAOgB,EAAP;AACAf;;AAEA,YAAKU,QAAL,GAAgBE,GAAhB;AACAI,6BAAsB,KAAKnB,IAA3B;AACD;;;4BAEMkB,E,EAAI;AACT,YAAKb,WAAL,CAAiBa,EAAjB;AACA,YAAKV,cAAL,CAAoBU,EAApB;AACA,YAAKP,eAAL,CAAqB,CAAE,KAAKS,MAAP,EAAe,KAAKC,KAApB,EAA2B,KAAKC,OAAL,CAAa,CAAb,CAA3B,CAArB;AACA,YAAKV,iBAAL;AACD;;;yCAEmB;AAClB,WAAI,KAAKQ,MAAL,CAAYG,GAAZ,CAAgB,CAAhB,IAAqB,GAAzB,EAA8B;AAC5B,cAAKN,QAAL,GAAgB,IAAhB;AACD;AACF;;;iCAEWC,E,EAAI;AACd,WAAMM,QAAQC,OAAOD,KAArB;;AAEA,WAAIA,MAAME,MAAN,CAAa,IAAb,KAAsBF,MAAME,MAAN,CAAa,OAAb,CAA1B,EAAiD;AAC/C,aAAI,KAAKnB,cAAL,EAAJ,EAA2B;AACzB,gBAAKa,MAAL,CAAYO,SAAZ,GAAwB,IAAxB;AACA,gBAAKP,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,IAAqBhC,UAAUiC,wBAA/B;AACD;AACF;;AAED,WAAIL,MAAME,MAAN,CAAa,MAAb,CAAJ,EAA0B;AACxB,aAAI,KAAKN,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,IAAqB,CAAChC,UAAUkC,qBAApC,EAA2D;AACzD,gBAAKV,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,KAAuBhC,UAAUmC,qBAAV,GAAkCb,EAAzD;AACD,UAFD,MAEO;AACL,gBAAKE,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,IAAqB,CAAChC,UAAUkC,qBAAhC;AACD;AACF,QAND,MAMO,IAAIN,MAAME,MAAN,CAAa,OAAb,CAAJ,EAA2B;AAChC,aAAI,KAAKN,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,IAAqBhC,UAAUkC,qBAAnC,EAA0D;AACxD,gBAAKV,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,KAAuBhC,UAAUmC,qBAAV,GAAkCb,EAAzD;AACD,UAFD,MAEO;AACL,gBAAKE,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,IAAqBhC,UAAUkC,qBAA/B;AACD;AACF,QANM,MAMA;AACL,cAAKV,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,IAAqB,CAArB;AACD;;AAxBa,WA0BNA,GA1BM,GA0BE,KAAKR,MA1BP,CA0BNQ,GA1BM;;AA2Bd,WAAIA,IAAI,CAAJ,IAAS,CAAb,EAAgB;AACd,cAAKR,MAAL,CAAYY,MAAZ,GAAqBtC,QAAQuC,gBAA7B;AACD,QAFD,MAEO,IAAIL,IAAI,CAAJ,IAAS,CAAb,EAAgB;AACrB,cAAKR,MAAL,CAAYY,MAAZ,GAAqBtC,QAAQwC,eAA7B;AACD,QAFM,MAEA;AACL,cAAKd,MAAL,CAAYY,MAAZ,GAAqBtC,QAAQyC,WAA7B;AACD;;AAED,YAAKf,MAAL,CAAYgB,OAAZ,CAAoB,CAApB,IAAyB,KAAKhB,MAAL,CAAYG,GAAZ,CAAgB,CAAhB,CAAzB;AACA,YAAKH,MAAL,CAAYgB,OAAZ,CAAoB,CAApB,IAAyB,KAAKhB,MAAL,CAAYG,GAAZ,CAAgB,CAAhB,CAAzB;AACA,YAAKH,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,KAAsBhC,UAAUyC,OAAV,GAAoBnB,EAA1C;AACA,YAAKE,MAAL,CAAYG,GAAZ,CAAgB,CAAhB,KAAsB,KAAKH,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,IAAqBV,EAA3C;AACA,YAAKE,MAAL,CAAYG,GAAZ,CAAgB,CAAhB,KAAsB,KAAKH,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,IAAqBV,EAA3C;AACD;;;oCAEcoB,M,EAAQ;AAAA;;AACrB,WAAMC,QAAQ,KAAKC,KAAnB;AADqB,WAEblB,OAFa,GAEM,IAFN,CAEbA,OAFa;AAAA,WAEJD,KAFI,GAEM,IAFN,CAEJA,KAFI;;AAGrB,WAAMoB,4CAAoBF,KAApB,sBAA8BjB,OAA9B,IAAuCD,KAAvC,EAAN;;AAEA,WAAMqB,QAAQ,KAAKtC,QAAL,CAAckC,MAAd,CAAd;AACA,YAAK,IAAIK,IAAI,CAAb,EAAgBA,IAAIF,aAAaG,MAAjC,EAAyCD,GAAzC,EAA8C;AAC5C,aAAME,cAAcJ,aAAaE,CAAb,CAApB;AACA,aAAMG,QAAQ,KAAK1C,QAAL,CAAcyC,WAAd,CAAd;;AAEA,aAAME,gBAAgB,KAAKC,kBAAL,CAAwBN,KAAxB,EAA+BI,KAA/B,CAAtB;AACA,aAAIC,aAAJ,EAAmB;AACjB,eAAIT,OAAOW,IAAP,KAAgB,OAApB,EAA6B;AAC3BX,oBAAOV,GAAP,CAAW,CAAX,IAAgBsB,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,CAAC,GAAvB,GAA6B,CAA7C;AACAb,oBAAOV,GAAP,CAAW,CAAX,IAAgBsB,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,CAAC,GAAvB,GAA6B,CAA7C;AACD;;AAED,eAAIN,YAAYI,IAAZ,KAAqB,MAAzB,EAAiC;AAC/B,kBAAKG,cAAL,CAAoBd,MAApB,EAA4BS,aAA5B;AACD;;AAED,eAAIT,OAAOW,IAAP,KAAgB,QAAhB,IAA4BJ,YAAYI,IAAZ,KAAqB,OAArD,EAA8D;AAC5D,kBAAKI,KAAL;AACA,iBAAI,KAAKA,KAAL,GAAa,CAAjB,EAAoB;AAClB,oBAAKC,OAAL,CAAaC,SAAb,GAAyB,eAAzB;AACD;AACD,kBAAKlC,KAAL,GAAa,oBAAU;AACrBE,oBAAK,CAAC,CAAC,GAAF,EAAO,CAAC,GAAR,CADgB;AAErBK,oBAAK,CAAC,CAAD,EAAI,CAAJ,CAFgB;AAGrBI,uBAAQtC,QAAQ8D;AAHK,cAAV,CAAb;AAKAC,wBAAW,YAAM;AACb,qBAAKpC,KAAL,GAAa,oBAAU;AACvBE,sBAAK5B,OAAO+D,mBAAP,EADkB;AAEvB9B,sBAAK,CAAC,CAAD,EAAI,EAAJ,CAFkB;AAGvBI,yBAAQtC,QAAQ8D;AAHO,gBAAV,CAAb;AAKH,cAND,EAMG,GANH;AAOD;AAEF;AACF;AACD,cAAO,IAAP;AACD;;;qCAEeG,I,EAAM;AACpB,YAAK,IAAIhB,IAAI,CAAb,EAAgBA,IAAIgB,KAAKf,MAAzB,EAAiCD,GAAjC,EAAsC;AACpC,cAAKjC,cAAL,CAAoBiD,KAAKhB,CAAL,CAApB;AACD;AACF;;;oCAEczB,E,EAAI;AACjB,YAAKE,MAAL,CAAYY,MAAZ,CAAmB9B,MAAnB,CAA0BgB,EAA1B;AACA,YAAKG,KAAL,CAAWnB,MAAX,CAAkBgB,EAAlB;AACA,YAAK,IAAIyB,IAAI,CAAb,EAAgBA,IAAI,KAAKrB,OAAL,CAAasB,MAAjC,EAAyCD,GAAzC,EAA8C;AAC5C,cAAKrB,OAAL,CAAaqB,CAAb,EAAgBzC,MAAhB,CAAuBgB,EAAvB;AACD;AACF;;;8BAEQ;AAAA,WAELZ,YAFK,GAUH,IAVG,CAELA,YAFK;AAAA,WAGLG,cAHK,GAUH,IAVG,CAGLA,cAHK;AAAA,WAILW,MAJK,GAUH,IAVG,CAILA,MAJK;AAAA,WAKLE,OALK,GAUH,IAVG,CAKLA,OALK;AAAA,WAMLkB,KANK,GAUH,IAVG,CAMLA,KANK;AAAA,WAOLnB,KAPK,GAUH,IAVG,CAOLA,KAPK;AAAA,WAQLuC,GARK,GAUH,IAVG,CAQLA,GARK;AAAA,WASLP,KATK,GAUH,IAVG,CASLA,KATK;;AAWP,YAAKC,OAAL,CAAaO,SAAb,GAAyB,KAAKR,KAA9B;AACA,YAAKS,UAAL,CAAgBD,SAAhB,WAAkC,KAAKzC,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,EAAmBmC,OAAnB,CAA2B,CAA3B,CAAlC,UAAoE,KAAK3C,MAAL,CAAYQ,GAAZ,CAAgB,CAAhB,EAAmBmC,OAAnB,CAA2B,CAA3B,CAApE;AACA,YAAKC,UAAL,CAAgBH,SAAhB,WAAkC,KAAKzC,MAAL,CAAY6C,MAAZ,GAAqB,CAArB,EAAwBF,OAAxB,CAAgC,CAAhC,CAAlC,UAAyE,KAAK3C,MAAL,CAAY6C,MAAZ,GAAqB,CAArB,EAAwBF,OAAxB,CAAgC,CAAhC,CAAzE;AACAH,WAAIM,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,GAApB,EAAyB,GAAzB;AACA5D,oBAAac,MAAb;AACAX,sBAAea,OAAf;AACAhB,oBAAae,KAAb;AACAZ,sBAAe+B,KAAf;AACD;;;kCAEYF,M,EAAQ;AAAA,WACXsB,GADW,GACH,IADG,CACXA,GADW;;AAEnBA,WAAIO,IAAJ;AACAP,WAAIQ,SAAJ,CAAc9B,OAAOf,GAAP,CAAW,CAAX,CAAd,EAA6Be,OAAOf,GAAP,CAAW,CAAX,CAA7B;AACAe,cAAON,MAAP,CAAc7B,MAAd,CAAqByD,GAArB;AACAA,WAAIS,OAAJ;AACD;;;oCAEcV,I,EAAM;AACnB,YAAK,IAAIhB,IAAI,CAAb,EAAgBA,IAAIgB,KAAKf,MAAzB,EAAiCD,GAAjC,EAAsC;AACpC,cAAKrC,YAAL,CAAkBqD,KAAKhB,CAAL,CAAlB;AACD;AACF;;AAED;;;;8BACS;AACP,YAAK1B,QAAL,GAAgB,KAAhB;AACA,YAAKoC,KAAL,GAAa,CAAb;AACA,YAAKC,OAAL,CAAaC,SAAb,GAAyB,eAAzB;;AAEA,YAAKnC,MAAL,GAAc,qBAAW;AACvB6B,eAAM,QADiB;AAEvB1B,cAAK,CAAC,GAAD,EAAM,GAAN,CAFkB;AAGvBa,kBAAS,CAAC,GAAD,EAAM,GAAN,CAHc;AAIvBR,cAAK,CAAC,CAAD,EAAI,CAAJ,CAJkB;AAKvBI,iBAAQtC,QAAQyC;AALO,QAAX,CAAd;;AAQA,YAAKb,OAAL,GAAe,EAAf;AACA,YAAKD,KAAL,GAAa,oBAAU;AACrBE,cAAK5B,OAAO+D,mBAAP,EADgB;AAErB9B,cAAK,CAAC,CAAD,EAAI,EAAJ,CAFgB;AAGrBI,iBAAQtC,QAAQ8D;AAHK,QAAV,CAAb;AAKA,YAAKhB,KAAL,GAAa7C,OAAO2E,OAApB;;AAEA,YAAKtE,IAAL;AACD;;;8BAEQ;AAAA;;AACP;AACA,YAAKiB,QAAL,GAAgB,KAAhB;;AAEA;AACA,WAAMsD,SAASC,SAASC,cAAT,CAAwB,QAAxB,CAAf;AACA,YAAKb,GAAL,GAAWW,OAAOG,UAAP,CAAkB,IAAlB,CAAX;;AAEA;AACA,2BAAUC,IAAV,CAAe,CACb,mBADa,EAEb,qBAFa,CAAf;AAIA,WAAMC,OAAO,SAAPA,IAAO,GAAM;AACjB,gBAAK5E,IAAL;AACD,QAFD;AAGA,2BAAU6E,OAAV,CAAkBD,IAAlB;;AAEA;AACA,uBAAME,KAAN;;AAEA;AACA,YAAK1D,MAAL,GAAc,qBAAW;AACvB6B,eAAM,QADiB;AAEvB1B,cAAK,CAAC,GAAD,EAAM,GAAN,CAFkB;AAGvBa,kBAAS,CAAC,GAAD,EAAM,GAAN,CAHc;AAIvBR,cAAK,CAAC,CAAD,EAAI,CAAJ,CAJkB;AAKvBI,iBAAQtC,QAAQyC;AALO,QAAX,CAAd;;AAQA,YAAKb,OAAL,GAAe,CAAE7B,QAAQsF,OAAR,EAAF,CAAf;AACA,YAAK1D,KAAL,GAAa,oBAAU;AACrBE,cAAK5B,OAAO+D,mBAAP,EADgB;AAErB9B,cAAK,CAAC,CAAD,EAAI,EAAJ,CAFgB;AAGrBI,iBAAQtC,QAAQ8D;AAHK,QAAV,CAAb;AAKA,YAAKhB,KAAL,GAAa7C,OAAO2E,OAApB;;AAEA,YAAKjB,KAAL,GAAa,CAAb;AACA,YAAKC,OAAL,GAAekB,SAASC,cAAT,CAAwB,OAAxB,CAAf;AACA,YAAKnB,OAAL,CAAaC,SAAb,GAAyB,eAAzB;AACA,YAAKO,UAAL,GAAkBU,SAASC,cAAT,CAAwB,UAAxB,CAAlB;AACA,YAAKT,UAAL,GAAkBQ,SAASC,cAAT,CAAwB,UAAxB,CAAlB;AACA,YAAKO,WAAL,GAAmBR,SAASC,cAAT,CAAwB,WAAxB,CAAnB;AACD;;;8BAEQnC,M,EAAQ;AACf,WAAM2B,SAAS3B,OAAO2B,MAAP,CAAc,KAAKL,GAAnB,CAAf;;AAEA,cAAO;AACLqB,YAAGhB,OAAO,CAAP,CADE,EACSiB,GAAGjB,OAAO,CAAP,CADZ,EACuBkB,OAAOlB,OAAO,CAAP,CAD9B,EACyCmB,QAAQnB,OAAO,CAAP;AADjD,QAAP;AAGD;;;sCAEgB;AACf,WAAMoB,aAAavE,KAAKC,GAAL,KAAa,KAAKK,MAAL,CAAYkE,YAA5C;AACA,cAAOD,cAAczF,UAAU2F,SAA/B;AACD;;;wCAEkB7C,K,EAAOI,K,EAAO;AAAA,WAE7B0C,eAF6B,GAM3B,IAN2B,CAE7BA,eAF6B;AAAA,WAG7BC,cAH6B,GAM3B,IAN2B,CAG7BA,cAH6B;AAAA,WAI7BC,aAJ6B,GAM3B,IAN2B,CAI7BA,aAJ6B;AAAA,WAK7BC,gBAL6B,GAM3B,IAN2B,CAK7BA,gBAL6B;;;AAQ/B,WAAIjD,MAAMuC,CAAN,GAAUnC,MAAMmC,CAAN,GAAUnC,MAAMqC,KAA1B,IACAzC,MAAMuC,CAAN,GAAUvC,MAAMyC,KAAhB,GAAwBrC,MAAMmC,CAD9B,IAEAvC,MAAMwC,CAAN,GAAUpC,MAAMoC,CAAN,GAAUpC,MAAMsC,MAF1B,IAGA1C,MAAM0C,MAAN,GAAe1C,MAAMwC,CAArB,GAAyBpC,MAAMoC,CAHnC,EAGsC;AAChC,aAAMU,IAAIH,eAAe/C,KAAf,EAAsBI,KAAtB,CAAV;AACA,aAAM+C,IAAIL,gBAAgB9C,KAAhB,EAAuBI,KAAvB,CAAV;AACA,aAAMgD,IAAIJ,cAAchD,KAAd,EAAqBI,KAArB,CAAV;AACA,aAAMiD,IAAIJ,iBAAiBjD,KAAjB,EAAwBI,KAAxB,CAAV;;AAEA,aAAKgD,KAAKC,CAAV,EAAc;AACZ,kBAAO,YAAP;AACD,UAFD,MAEO,IAAIH,KAAKE,CAAT,EAAY;AACjB,kBAAO,UAAP;AACD,UAFM,MAEA,IAAIF,KAAKG,CAAT,EAAa;AAClB,kBAAO,aAAP;AACD,UAFM,MAEA,IAAIF,KAAKC,CAAT,EAAY;AACjB,kBAAO,WAAP;AACD,UAFM,MAEA,IAAID,KAAKE,CAAT,EAAY;AACjB,kBAAO,cAAP;AACD,UAFM,MAEA,IAAIH,CAAJ,EAAO;AACZ,kBAAO,MAAP;AACD,UAFM,MAEA,IAAIC,CAAJ,EAAO;AACZ,kBAAO,OAAP;AACD,UAFM,MAEA,IAAIC,CAAJ,EAAO;AACZ,kBAAO,KAAP;AACD,UAFM,MAEA,IAAIC,CAAJ,EAAO;AACZ,kBAAO,QAAP;AACD;AAEN;AACF;;;qCAEerD,K,EAAOI,K,EAAO;AAC5B,WAAMkD,cAActD,MAAMuC,CAA1B;AACA,WAAMgB,eAAevD,MAAMuC,CAAN,GAAUvC,MAAMyC,KAArC;AACA,WAAMe,cAAcpD,MAAMmC,CAA1B;AACA,WAAMkB,eAAerD,MAAMmC,CAAN,GAAUnC,MAAMqC,KAArC;AACA,cAAOc,eAAeC,WAAf,IAA8BF,cAAcE,WAAnD;AACD;;;oCAEcxD,K,EAAOI,K,EAAO;AAC3B,WAAMkD,cAActD,MAAMuC,CAA1B;AACA,WAAMgB,eAAevD,MAAMuC,CAAN,GAAUvC,MAAMyC,KAArC;AACA,WAAMe,cAAcpD,MAAMmC,CAA1B;AACA,WAAMkB,eAAerD,MAAMmC,CAAN,GAAUnC,MAAMqC,KAArC;AACA,cAAOa,cAAcG,YAAd,IAA8BF,eAAeE,YAApD;AACD;;;mCAEazD,K,EAAOI,K,EAAO;AAC1B,WAAMsD,aAAa1D,MAAMwC,CAAzB;AACA,WAAMmB,gBAAgB3D,MAAMwC,CAAN,GAAUxC,MAAM0C,MAAtC;AACA,WAAMkB,aAAaxD,MAAMoC,CAAzB;AACA,WAAMqB,gBAAgBzD,MAAMoC,CAAN,GAAUpC,MAAMsC,MAAtC;AACA,cAAOgB,aAAaG,aAAb,IAA8BF,gBAAgBE,aAArD;AACD;;;sCAEgB7D,K,EAAOI,K,EAAO;AAC7B,WAAMsD,aAAa1D,MAAMwC,CAAzB;AACA,WAAMmB,gBAAgB3D,MAAMwC,CAAN,GAAUxC,MAAM0C,MAAtC;AACA,WAAMkB,aAAaxD,MAAMoC,CAAzB;AACA,WAAMqB,gBAAgBzD,MAAMoC,CAAN,GAAUpC,MAAMsC,MAAtC;AACA,cAAOiB,gBAAgBC,UAAhB,IAA8BF,aAAaE,UAAlD;AACD;;;oCAEchE,M,EAAQS,a,EAAe;AACpC,WAAIT,OAAOW,IAAP,KAAgB,OAApB,EAA6B;AAC3B,cAAK+B,WAAL,CAAiBnB,SAAjB,WAAmCd,aAAnC;AACD;AACD,eAAOA,aAAP;AACE,cAAK,OAAL;AACET,kBAAOV,GAAP,CAAW,CAAX,IAAgB,CAAhB;AACAU,kBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACA;AACF,cAAK,MAAL;AACEE,kBAAOV,GAAP,CAAW,CAAX,IAAgB,CAAhB;AACAU,kBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACA;AACF,cAAK,KAAL;AACEE,kBAAOV,GAAP,CAAW,CAAX,IAAgB,CAACU,OAAOV,GAAP,CAAW,CAAX,CAAD,GAAiB,IAAjC;AACAU,kBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACA;AACF,cAAK,QAAL;AACEE,kBAAOV,GAAP,CAAW,CAAX,IAAgB,CAAhB;AACAU,kBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACA;AACF,cAAK,cAAL;AACE,eAAIE,OAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAApB,EAAuC;AACrCE,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACD;AACD,eAAIE,OAAOV,GAAP,CAAW,CAAX,MAAkB,CAAlB,IAAuBU,OAAOV,GAAP,CAAW,CAAX,IAAgB,CAA3C,EAA8C;AAC5CU,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACD;AACD,eAAIE,OAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB,IACDE,OAAOV,GAAP,CAAW,CAAX,MAAkB,CADrB,EACwB;AACtBU,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACAE,oBAAOV,GAAP,CAAW,CAAX,IAAgB,CAAhB;AACD;AACD,eAAIU,OAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB,IACDE,OAAOV,GAAP,CAAW,CAAX,IAAgB,CADnB,EACsB;AACpBU,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,IAAoB,CAApC;AACAE,oBAAOV,GAAP,CAAW,CAAX,IAAgB,CAACU,OAAOV,GAAP,CAAW,CAAX,CAAD,GAAiB,IAAjC;AACD;AACD;AACF,cAAK,aAAL;AACE,eAAIU,OAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAApB,EAAuC;AACrCE,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACD;AACD,eAAIE,OAAOV,GAAP,CAAW,CAAX,MAAkB,CAAlB,IAAuBU,OAAOV,GAAP,CAAW,CAAX,IAAgB,CAA3C,EAA8C;AAC5CU,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACD;AACD,eAAIE,OAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB,IACDE,OAAOV,GAAP,CAAW,CAAX,MAAkB,CADrB,EACwB;AACtBU,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACAE,oBAAOV,GAAP,CAAW,CAAX,IAAgB,CAAhB;AACD;AACD,eAAIU,OAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB,IACDE,OAAOV,GAAP,CAAW,CAAX,IAAgB,CADnB,EACsB;AACpBU,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,IAAoB,CAApC;AACAE,oBAAOV,GAAP,CAAW,CAAX,IAAgB,CAACU,OAAOV,GAAP,CAAW,CAAX,CAAD,GAAiB,IAAjC;AACD;AACD;AACF,cAAK,WAAL;AACE,eAAIU,OAAOV,GAAP,CAAW,CAAX,IAAgB,CAApB,EAAuB;AACrBU,oBAAOV,GAAP,CAAW,CAAX,IAAgB,CAAhB;AACD;AACD,eAAIU,OAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAApB,EAAuC;AACrCE,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACD;AACD,eAAIE,OAAOV,GAAP,CAAW,CAAX,IAAgB,CAApB,EAAuB;AACrBU,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACAE,oBAAOV,GAAP,CAAW,CAAX,IAAgB,CAACU,OAAOV,GAAP,CAAW,CAAX,CAAD,GAAiB,IAAjC;AACD;AACD;AACF,cAAK,UAAL;AACE,eAAIU,OAAOV,GAAP,CAAW,CAAX,IAAgB,CAApB,EAAuB;AACrBU,oBAAOV,GAAP,CAAW,CAAX,IAAgB,CAAhB;AACD;AACD,eAAIU,OAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAApB,EAAuC;AACrCE,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACD;AACD,eAAIE,OAAOV,GAAP,CAAW,CAAX,IAAgB,CAApB,EAAuB;AACrBU,oBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACAE,oBAAOV,GAAP,CAAW,CAAX,IAAgB,CAACU,OAAOV,GAAP,CAAW,CAAX,CAAD,GAAiB,IAAjC;AACD;AACD;AACF,cAAK,YAAL;AACEU,kBAAOf,GAAP,CAAW,CAAX,IAAgBe,OAAOF,OAAP,CAAe,CAAf,CAAhB;AACA;AA/EJ;AAiFD;;;;;;AAIH,KAAMoE,MAAM,IAAI3G,aAAJ,EAAZ;AACA2E,UAASiC,gBAAT,CAA0B,kBAA1B,EAA8C;AAAA,UAAMD,IAAI1G,IAAJ,EAAN;AAAA,EAA9C,E;;;;;;;;;;;;;;;;KC5bM4G,S;AACJ,wBAAc;AAAA;;AACZ,UAAKC,aAAL,GAAqB,EAArB;AACA,UAAKC,OAAL,GAAe,EAAf;AACA,UAAKC,cAAL,GAAsB,EAAtB;;AAEA,UAAKlC,IAAL,GAAY,KAAKA,IAAL,CAAU5E,IAAV,CAAe,IAAf,CAAZ;AACA,UAAK+G,KAAL,GAAa,KAAKA,KAAL,CAAW/G,IAAX,CAAgB,IAAhB,CAAb;AACA,UAAKgH,GAAL,GAAW,KAAKA,GAAL,CAAShH,IAAT,CAAc,IAAd,CAAX;AACA,UAAKiH,OAAL,GAAe,KAAKA,OAAL,CAAajH,IAAb,CAAkB,IAAlB,CAAf;AACA,UAAK8E,OAAL,GAAe,KAAKA,OAAL,CAAa9E,IAAb,CAAkB,IAAlB,CAAf;AACD;;;;0BAEIkH,G,EAAK;AAAA,WACAH,KADA,GACU,IADV,CACAA,KADA;;AAERG,WAAIC,OAAJ,CAAY;AAAA,gBAAOJ,MAAMK,GAAN,CAAP;AAAA,QAAZ;AACD;;;yBAEGA,G,EAAK;AACP,cAAO,KAAKR,aAAL,CAAmBQ,GAAnB,CAAP;AACD;;;+BAES;AAAA,WACAR,aADA,GACkB,IADlB,CACAA,aADA;;AAER,WAAIS,QAAQ,IAAZ;AACA,YAAK,IAAIC,CAAT,IAAcV,aAAd,EAA6B;AAC3B,aAAIA,cAAcW,cAAd,CAA6BD,CAA7B,KAAmC,CAACV,cAAcU,CAAd,CAAxC,EAA0D;AACxDD,mBAAQ,KAAR;AACD;AACF;AACD,cAAOA,KAAP;AACD;;;6BAEOG,I,EAAM;AACZ,YAAKV,cAAL,CAAoBW,IAApB,CAAyBD,IAAzB;AACD;;AAED;;;;2BAEMJ,G,EAAK;AAAA,WACDR,aADC,GAC0C,IAD1C,CACDA,aADC;AAAA,WACcE,cADd,GAC0C,IAD1C,CACcA,cADd;AAAA,WAC8BG,OAD9B,GAC0C,IAD1C,CAC8BA,OAD9B;;;AAGT,WAAIL,cAAcQ,GAAd,CAAJ,EAAwB;AACtB,gBAAOR,cAAcQ,GAAd,CAAP;AACD,QAFD,MAEO;AAAA;AACL,eAAMM,MAAM,IAAIC,KAAJ,EAAZ;AACAD,eAAIE,MAAJ,GAAa,YAAM;AACjBhB,2BAAcQ,GAAd,IAAqBM,GAArB;;AAEA,iBAAIT,SAAJ,EAAe;AACbH,8BAAeK,OAAf,CAAuB;AAAA,wBAAYU,UAAZ;AAAA,gBAAvB;AACD;AACF,YAND;AAOAjB,yBAAcQ,GAAd,IAAqB,KAArB;AACAM,eAAII,GAAJ,GAAUV,GAAV;AAVK;AAWN;AACF;;;;;;YAIqC,IAAIT,SAAJ,E;;KAAhC/B,I,QAAAA,I;KAAMoC,G,QAAAA,G;KAAKlC,O,QAAAA,O;KAASmC,O,QAAAA,O;mBACb;AACbrC,SAAMA,IADO;AAEboC,QAAKA,GAFQ;AAGblC,YAASA,OAHI;AAIbmC,YAASA;AAJI,E;;;;;;;;;;;;;;;;KC7DTc,M;AACJ,mBAAYC,IAAZ,EAAkB;AAAA;;AAAA,SACRxG,GADQ,GACsBwG,IADtB,CACRxG,GADQ;AAAA,SACHK,GADG,GACsBmG,IADtB,CACHnG,GADG;AAAA,SACEI,MADF,GACsB+F,IADtB,CACE/F,MADF;AAAA,SACUI,OADV,GACsB2F,IADtB,CACU3F,OADV;;AAEhB,UAAKa,IAAL,GAAY,QAAZ;AACA,UAAK1B,GAAL,GAAWA,GAAX;AACA,UAAKa,OAAL,GAAeA,OAAf;AACA,UAAKR,GAAL,GAAWA,GAAX;AACA,UAAKI,MAAL,GAAcA,MAAd;AACA,UAAKL,SAAL,GAAiB,KAAjB;AACA,UAAKqG,UAAL,GAAkB,CAAlB;AACA,UAAK1C,YAAL,GAAoBxE,KAAKC,GAAL,EAApB;;AAEA,UAAKkD,MAAL,GAAc,KAAKA,MAAL,CAAYlE,IAAZ,CAAiB,IAAjB,CAAd;AACD;;;;8BAEQ;AAAA,WACCwB,GADD,GACiB,IADjB,CACCA,GADD;AAAA,WACMS,MADN,GACiB,IADjB,CACMA,MADN;;AAEP,cAAO,CACLT,IAAI,CAAJ,IAAS,EADJ,EAELA,IAAI,CAAJ,IAAS,EAFJ,EAGL,EAHK,EAIL,EAJK,CAAP;AAMD;;;;;;mBAGYuG,M;;;;;;;;;;;;;;AC1Bf;;;;;;;;KAEMG,M;AACJ,mBAAYF,IAAZ,EAAkB;AAAA;;AAAA,SACRxG,GADQ,GAC6CwG,IAD7C,CACRxG,GADQ;AAAA,SACH2G,IADG,GAC6CH,IAD7C,CACHG,IADG;AAAA,SACGC,KADH,GAC6CJ,IAD7C,CACGI,KADH;AAAA,SACUC,MADV,GAC6CL,IAD7C,CACUK,MADV;AAAA,SACkBjB,GADlB,GAC6CY,IAD7C,CACkBZ,GADlB;AAAA,SACuBkB,GADvB,GAC6CN,IAD7C,CACuBM,GADvB;AAAA,SAC4BC,IAD5B,GAC6CP,IAD7C,CAC4BO,IAD5B;AAAA,SACkCC,MADlC,GAC6CR,IAD7C,CACkCQ,MADlC;;AAEhB,UAAKhH,GAAL,GAAWA,GAAX;AACA,UAAK2G,IAAL,GAAYA,IAAZ;AACA,UAAKC,KAAL,GAAa,OAAOA,KAAP,KAAiB,QAAjB,GAA4BA,KAA5B,GAAoC,CAAjD;AACA,UAAKC,MAAL,GAAcA,MAAd;AACA,UAAKjB,GAAL,GAAWA,GAAX;AACA,UAAKkB,GAAL,GAAWA,GAAX;AACA,UAAKC,IAAL,GAAYA,IAAZ;AACA,UAAKE,MAAL,GAAc,CAAd;AACA,UAAKD,MAAL,GAAcA,MAAd;;AAEA,UAAKrI,MAAL,GAAc,KAAKA,MAAL,CAAYH,IAAZ,CAAiB,IAAjB,CAAd;AACA,UAAKI,MAAL,GAAc,KAAKA,MAAL,CAAYJ,IAAZ,CAAiB,IAAjB,CAAd;AACD;;;;4BAEMmB,E,EAAI;AAAA,WACDiH,KADC,GACS,IADT,CACDA,KADC;;AAET,YAAKK,MAAL,IAAeL,QAAQjH,EAAvB;AACD;;;4BAEM0C,G,EAAK;AAAA,WACFuE,KADE,GAC2D,IAD3D,CACFA,KADE;AAAA,WACKC,MADL,GAC2D,IAD3D,CACKA,MADL;AAAA,WACa7G,GADb,GAC2D,IAD3D,CACaA,GADb;AAAA,WACkB2G,IADlB,GAC2D,IAD3D,CACkBA,IADlB;AAAA,WACwBI,IADxB,GAC2D,IAD3D,CACwBA,IADxB;AAAA,WAC8BE,MAD9B,GAC2D,IAD3D,CAC8BA,MAD9B;AAAA,WACsCH,GADtC,GAC2D,IAD3D,CACsCA,GADtC;AAAA,WAC2ClB,GAD3C,GAC2D,IAD3D,CAC2CA,GAD3C;AAAA,WACgDoB,MADhD,GAC2D,IAD3D,CACgDA,MADhD;;AAEV,WAAIE,cAAJ;;AAEA,WAAIN,QAAQ,CAAZ,EAAe;AACb,aAAMO,MAAM,KAAKN,MAAL,CAAYxF,MAAxB;AACA;AACA,aAAM+F,MAAMzF,KAAK0F,KAAL,CAAWJ,MAAX,CAAZ;AACAC,iBAAQL,OAAOO,MAAMD,GAAb,CAAR;;AAEA,aAAIJ,QAAQK,OAAOD,GAAnB,EAAwB;AACtB,gBAAKG,IAAL,GAAY,IAAZ;AACA;AACD;AACF,QAVD,MAUO;AACLJ,iBAAQL,OAAO,CAAP,CAAR;AACD;;AAED,WAAInD,IAAI1D,IAAI,CAAJ,CAAR;AACA,WAAI2D,IAAI3D,IAAI,CAAJ,CAAR;;AAEA,WAAI8G,QAAQ,UAAZ,EAAwB;AACtBnD,cAAKuD,QAAQP,KAAK,CAAL,CAAb;AACD,QAFD,MAEO;AACLjD,cAAKwD,QAAQP,KAAK,CAAL,CAAb;AACD;;AAED,WAAIK,WAAW,MAAf,EAAuB;AACrB3E,aAAIQ,SAAJ,CAAc8D,KAAK,CAAL,CAAd,EAAuB,CAAvB;AACAtE,aAAIkF,KAAJ,CAAU,CAAC,CAAX,EAAc,CAAd;AACD;;AAGDlF,WAAImF,SAAJ,CACE,oBAAUhC,GAAV,CAAcI,GAAd,CADF,EAEElC,CAFF,EAEKC,CAFL,EAGEgD,KAAK,CAAL,CAHF,EAGWA,KAAK,CAAL,CAHX,EAIE,CAJF,EAIK,CAJL,EAKEA,KAAK,CAAL,CALF,EAKWA,KAAK,CAAL,CALX;AAOD;;;;;;mBAGYD,M;;;;;;;;;;;;;;;;KCnETe,K;AACJ,oBAAc;AAAA;;AACZ,UAAKC,WAAL,GAAmB,EAAnB;;AAEA,UAAKC,MAAL,GAAc,KAAKA,MAAL,CAAYnJ,IAAZ,CAAiB,IAAjB,CAAd;AACD;;;;6BAEO;AAAA;;AAAA,WACEmJ,MADF,GACa,IADb,CACEA,MADF;;AAEN1E,gBAASiC,gBAAT,CAA0B,SAA1B,EAAqC;AAAA,gBAAKyC,OAAOC,CAAP,EAAU,IAAV,CAAL;AAAA,QAArC;AACA3E,gBAASiC,gBAAT,CAA0B,OAA1B,EAAmC;AAAA,gBAAKyC,OAAOC,CAAP,EAAU,KAAV,CAAL;AAAA,QAAnC;AACA;AACA1H,cAAOD,KAAP,GAAe;AACbE,iBAAQ;AAAA,kBAAO,MAAKuH,WAAL,CAAiBG,IAAIC,WAAJ,EAAjB,CAAP;AAAA;AADK,QAAf;;AAIA5H,cAAOgF,gBAAP,CAAwB,SAAxB,EAAmC,aAAK;AACxC;AACA,aAAG,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,EAAjB,EAAqB6C,OAArB,CAA6BH,EAAEI,OAA/B,IAA0C,CAAC,CAA9C,EAAiD;AAC7CJ,aAAEK,cAAF;AACH;AACJ,QALG,EAKD,KALC;AAOD;;;4BAEMC,K,EAAOC,M,EAAQ;AACpB,WAAMC,OAAOF,MAAMF,OAAnB;AACA,WAAIH,YAAJ;;AAEA,eAAOO,IAAP;AACE,cAAK,EAAL;AACEP,iBAAM,OAAN;AACA;AACF,cAAK,EAAL;AACEA,iBAAM,MAAN;AACA;AACF,cAAK,EAAL;AACEA,iBAAM,IAAN;AACA;AACF,cAAK,EAAL;AACEA,iBAAM,OAAN;AACA;AACF,cAAK,EAAL;AACEA,iBAAM,MAAN;AACA;AACF;AACEA,iBAAMQ,OAAOC,YAAP,CAAoBF,IAApB,CAAN;AAjBJ;;AAoBA,YAAKV,WAAL,CAAiBG,GAAjB,IAAwBM,MAAxB;AACD;;;;;;mBAGY,IAAIV,KAAJ,E;;;;;;;;;;;;;ACrDf;;;;;;AAEO,KAAM7G,oCAAc,qBAAW;AACpCgF,QAAK,mBAD+B;AAEpC5F,QAAK,CAAC,CAAD,EAAI,CAAJ,CAF+B;AAGpC6G,WAAQ,CACN,CADM,EACH,CADG,EACA,CADA,EACG,CADH,EACM,CADN,EACS,CADT,EACY,CADZ,EACe,CADf,EACkB,CADlB,EACqB,CADrB,EACwB,CADxB,EAC2B,CAD3B,EAC8B,CAD9B,EAEN,CAFM,EAEH,CAFG,EAEA,CAFA,EAEG,CAFH,EAEM,CAFN,EAES,CAFT,EAEY,CAFZ,EAEe,CAFf,EAEkB,CAFlB,EAEqB,CAFrB,EAEwB,CAFxB,EAE2B,CAF3B,EAE8B,CAF9B,CAH4B;AAOpCF,SAAM,CAAC,EAAD,EAAK,EAAL,CAP8B;AAQpCC,UAAO,EAR6B;AASpCE,QAAK,YAT+B;AAUpCC,SAAM,KAV8B;AAWpCC,WAAQ;AAX4B,EAAX,CAApB;;AAeA,KAAMtG,8CAAmB,qBAAW;AACzCkF,QAAK,mBADoC;AAEzC5F,QAAK,CAAC,CAAD,EAAI,CAAJ,CAFoC;AAGzC6G,WAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAHiC;AAIzCF,SAAM,CAAC,EAAD,EAAK,EAAL,CAJmC;AAKzCC,UAAO,EALkC;AAMzCE,QAAK,YANoC;AAOzCC,SAAM,KAPmC;AAQzCC,WAAQ;AARiC,EAAX,CAAzB;;AAYA,KAAMrG,4CAAkB,qBAAW;AACxCiF,QAAK,mBADmC;AAExC5F,QAAK,CAAC,CAAD,EAAI,CAAJ,CAFmC;AAGxC6G,WAAQ,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAHgC;AAIxCF,SAAM,CAAC,EAAD,EAAK,EAAL,CAJkC;AAKxCC,UAAO,EALiC;AAMxCE,QAAK,YANmC;AAOxCC,SAAM,KAPkC;AAQxCC,WAAQ;AARgC,EAAX,CAAxB;;AAYA,KAAMuB,gDAAoB,qBAAW;AAC1C3C,QAAK,mBADqC;AAE1C5F,QAAK,CAAC,CAAD,EAAI,CAAJ,CAFqC;AAG1C6G,WAAQ,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB,EAA6B,EAA7B,EAAiC,EAAjC,EAAqC,EAArC,CAHkC;AAI1CF,SAAM,CAAC,EAAD,EAAK,EAAL,CAJoC;AAK1CC,UAAO,EALmC;AAM1CE,QAAK,YANqC;AAO1CC,SAAM,IAPoC;AAQ1CC,WAAQ;AARkC,EAAX,CAA1B;;AAWA,KAAMwB,8CAAmB,qBAAW;AACzC5C,QAAK,mBADoC;AAEzC5F,QAAK,CAAC,CAAD,EAAI,CAAJ,CAFoC;AAGzC6G,WAAQ,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB,EAA6B,EAA7B,EAAiC,EAAjC,EAAqC,EAArC,CAHiC;AAIzCF,SAAM,CAAC,EAAD,EAAK,EAAL,CAJmC;AAKzCC,UAAO,EALkC;AAMzCE,QAAK,YANoC;AAOzCC,SAAM,IAPmC;AAQzCC,WAAQ;AARiC,EAAX,CAAzB;;AAWA,KAAM/E,wBAAQ,qBAAW;AAC9B2D,QAAK,qBADyB;AAE9B5F,QAAK,CAAC,CAAD,EAAI,CAAJ,CAFyB;AAG9B6G,WAAQ,CAAC,CAAD,CAHsB;AAI9BF,SAAM,CAAC,EAAD,EAAK,EAAL,CAJwB;AAK9BC,UAAO,CALuB;AAM9BE,QAAK,YANyB;AAO9BC,SAAM,KAPwB;AAQ9BC,WAAQ;AARsB,EAAX,CAAd,C;;;;;;;;;;;;;AC/DP;;;;;;AAEA;AACA,KAAMyB,KAAK,EAAX;;AAEA;AACA,KAAMC,OAAO,GAAb,C,CAAoB;AACpB,KAAMC,OAAO,GAAb,C,CAAoB;AACpB,KAAMC,MAAM,EAAZ,C,CAAoB;AACpB,KAAMC,MAAM,GAAZ,C,CAAoB;;AAEb,KAAM9F,4BAAU;AACrB;AACA,oBAAS;AACP/C,QAAK,CAACyI,EAAD,EAAK,CAAL,CADE;AAEP9B,SAAM,CAAC,MAAOkC,MAAM,CAAb,GAAkBJ,EAAnB,EAAuBA,EAAvB;AAFC,EAAT,CAFqB,EAMrB,mBAAS;AACPzI,QAAK,CAAC,MAAO6I,MAAM,CAAd,EAAkB,CAAlB,CADE;AAEPlC,SAAM,CAAC,MAAOkC,MAAM,CAAb,GAAkBJ,EAAnB,EAAuBA,EAAvB;AAFC,EAAT,CANqB;;AAWrB;AACA,oBAAS;AACPzI,QAAK,CAACyI,EAAD,EAAK,MAAMA,EAAX,CADE;AAEP9B,SAAM,CAAC,MAAOkC,MAAM,CAAb,GAAkBJ,EAAnB,EAAuBA,EAAvB;AAFC,EAAT,CAZqB,EAgBrB,mBAAS;AACPzI,QAAK,CAAC,MAAO6I,MAAM,CAAd,EAAkB,MAAMJ,EAAxB,CADE;AAEP9B,SAAM,CAAC,MAAOkC,MAAM,CAAb,GAAkBJ,EAAnB,EAAuBA,EAAvB;AAFC,EAAT,CAhBqB;;AAqBrB;AACA,oBAAS;AACPzI,QAAK,CAAC,CAAD,EAAI,CAAJ,CADE;AAEP2G,SAAM,CAAC8B,EAAD,EAAK,GAAL;AAFC,EAAT,CAtBqB;;AA2BrB;AACA,oBAAS;AACPzI,QAAK,CAAC,MAAMyI,EAAP,EAAW,CAAX,CADE;AAEP9B,SAAM,CAAC8B,EAAD,EAAK,GAAL;AAFC,EAAT,CA5BqB;;AAiCrB;AACA,oBAAS;AACPzI,QAAK,CAACyI,EAAD,EAAK,MAAMG,GAAX,CADE;AAEPjC,SAAM,CAAC+B,IAAD,EAAOD,EAAP;AAFC,EAAT,CAlCqB;;AAuCrB;AACA,oBAAS;AACPzI,QAAK,CAAC,MAAMyI,EAAN,GAAWC,IAAZ,EAAkB,MAAME,GAAxB,CADE;AAEPjC,SAAM,CAAC+B,IAAD,EAAOD,EAAP;AAFC,EAAT,CAxCqB;;AA6CrB;AACA,oBAAS;AACPzI,QAAK,CAAC0I,OAAOD,EAAP,GAAY,GAAb,EAAkB,MAAMG,GAAxB,CADE;AAEPjC,SAAM,CAACgC,IAAD,EAAOF,EAAP;AAFC,EAAT,CA9CqB;;AAmDrB;AACA,oBAAS;AACPzI,QAAK,CAAC0I,OAAOD,EAAP,GAAY,GAAb,EAAkB,MAAMG,GAAxB,CADE;AAEPjC,SAAM,CAACgC,IAAD,EAAOF,EAAP;AAFC,EAAT,CApDqB,EAyDrB,mBAAS;AACPzI,QAAK,CAAC,CAAD,EAAI,CAACyI,EAAD,GAAM,EAAV,CADE;AAEP9B,SAAM,CAAC,GAAD,EAAM8B,EAAN;AAFC,EAAT,CAzDqB,CAAhB;;AA+DA,KAAMtG,oDAAsB,SAAtBA,mBAAsB,GAAM;AACvC,OAAM2G,SAAS,SAATA,MAAS;AAAA,YAAOnH,KAAK0F,KAAL,CAAW1F,KAAKC,MAAL,KAAgBuF,GAA3B,CAAP;AAAA,IAAf;AACA,OAAM4B,OAAO,CACX,CAAC,GAAD,EAAM,GAAN,CADW,EAEX,CAAC,GAAD,EAAM,GAAN,CAFW,EAGX,CAAC,GAAD,EAAM,GAAN,CAHW,EAIX,CAAC,EAAD,EAAK,GAAL,CAJW,EAKX,CAAC,GAAD,EAAM,GAAN,CALW,EAMX,CAAC,GAAD,EAAM,GAAN,CANW,EAOX,CAAC,GAAD,EAAM,GAAN,CAPW,EAQX,CAAC,GAAD,EAAM,GAAN,CARW,EASX,CAAC,GAAD,EAAM,GAAN,CATW,EAUX,CAAC,GAAD,EAAM,GAAN,CAVW,EAWX,CAAC,GAAD,EAAM,GAAN,CAXW,EAYX,CAAC,GAAD,EAAM,GAAN,CAZW,EAaX,CAAC,GAAD,EAAM,GAAN,CAbW,EAcX,CAAC,GAAD,EAAM,GAAN,CAdW,EAeX,CAAC,GAAD,EAAM,GAAN,CAfW,EAgBX,CAAC,GAAD,EAAM,GAAN,CAhBW,EAiBX,CAAC,GAAD,EAAM,GAAN,CAjBW,EAkBX,CAAC,GAAD,EAAM,GAAN,CAlBW,EAmBX,CAAC,GAAD,EAAM,GAAN,CAnBW,EAoBX,CAAC,GAAD,EAAM,GAAN,CApBW,EAqBX,CAAC,GAAD,EAAM,GAAN,CArBW,EAsBXD,OAAO,EAAP,CAtBW,CAAb;AAuBA,OAAIE,aAAa,CAAjB;AACA,OAAIrH,KAAKC,MAAL,KAAgB,GAApB,EAAyB;AACvBoH,kBAAa,CAAC,CAAd;AACD;AACD,UAAO,CAAGD,KAAK,CAAL,IAAWC,aAAaF,OAAO,EAAP,CAA3B,EAAyCC,KAAK,CAAL,CAAzC,CAAP;AACD,EA9BM,C;;;;;;;;;;;;;;AC1EP;;;;;;;;KAEME,I;AACJ,iBAAYzC,IAAZ,EAAkB;AAAA;;AAAA,SACRxG,GADQ,GACMwG,IADN,CACRxG,GADQ;AAAA,SACH2G,IADG,GACMH,IADN,CACHG,IADG;;AAEhB,UAAKjF,IAAL,GAAY,MAAZ;AACA,UAAKiF,IAAL,GAAYA,IAAZ;AACA,UAAK3G,GAAL,GAAWA,GAAX;AACA,UAAKS,MAAL,GAAc,yBAAekG,IAAf,CAAd;;AAEA,UAAKjE,MAAL,GAAc,KAAKA,MAAL,CAAYlE,IAAZ,CAAiB,IAAjB,CAAd;AACD;;;;8BAEQ;AAAA,WACCwB,GADD,GACe,IADf,CACCA,GADD;AAAA,WACM2G,IADN,GACe,IADf,CACMA,IADN;;AAEP,cAAO,GAAGuC,MAAH,CAAUlJ,GAAV,EAAekJ,MAAf,CAAsBvC,IAAtB,CAAP;AACD;;;;;;mBAGYsC,I;;;;;;;;;;;;;;ACnBf;;;;;;;;KAEME,U;AACJ,uBAAYxC,IAAZ,EAAkB;AAAA;;AAChB,UAAKA,IAAL,GAAYA,IAAZ;AACD;;;;4BAEMtE,G,EAAK;AAAA,WACFsE,IADE,GACO,IADP,CACFA,IADE;AAEV;AACA;AACA;AACA;AACA;;AACAtE,WAAI+G,SAAJ,GAAgB,OAAhB;AACA/G,WAAIgH,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB1C,KAAK,CAAL,CAAnB,EAA4BA,KAAK,CAAL,CAA5B;AACA;AACA;AACD;;;;;;mBAGYwC,U;;;;;;;;;;;ACrBR,KAAM5I,wDAAwB,GAA9B,C,CAAmC;AACnC,KAAMC,wDAAwB,IAA9B,C,CAAoC;AACpC,KAAMF,8DAA2B,CAAC,GAAlC;AACA,KAAMQ,4BAAU,IAAhB,C,CAAsB;AACtB,KAAMkD,gCAAY,CAAlB,C,CAAqB;AACrB,KAAMsF,wCAAgB,EAAtB,C;;;;;;;;;;;;;;ACLP;;;;KAEMC,K;AACJ,kBAAY/C,IAAZ,EAAkB;AAAA;;AAAA,SACRxG,GADQ,GACawG,IADb,CACRxG,GADQ;AAAA,SACHK,GADG,GACamG,IADb,CACHnG,GADG;AAAA,SACEI,MADF,GACa+F,IADb,CACE/F,MADF;;AAEhB,UAAKiB,IAAL,GAAY,OAAZ;AACA,UAAK1B,GAAL,GAAWA,GAAX;AACA,UAAKa,OAAL,GAAeb,GAAf;AACA,UAAKK,GAAL,GAAWA,GAAX;AACA,UAAKI,MAAL,GAAcA,MAAd;;AAEA,UAAK9B,MAAL,GAAc,KAAKA,MAAL,CAAYH,IAAZ,CAAiB,IAAjB,CAAd;AACA,UAAKkE,MAAL,GAAc,KAAKA,MAAL,CAAYlE,IAAZ,CAAiB,IAAjB,CAAd;AACD;;;;8BAEQ;AAAA,WACCwB,GADD,GACiB,IADjB,CACCA,GADD;AAAA,WACMS,MADN,GACiB,IADjB,CACMA,MADN;;AAEP,cAAO,GAAGyI,MAAH,CAAUlJ,GAAV,EAAekJ,MAAf,CAAsBzI,OAAOkG,IAA7B,CAAP;AACD;;;4BAEMhH,E,EAAI;AACT,YAAKkB,OAAL,CAAa,CAAb,IAAkB,KAAKb,GAAL,CAAS,CAAT,CAAlB;AACA,WAAI,KAAKK,GAAL,CAAS,CAAT,MAAgB,CAApB,EAAuB;AACrB,cAAKA,GAAL,CAAS,CAAT,KAAe,qBAAUV,EAAzB;AACD;AACD,YAAKK,GAAL,CAAS,CAAT,KAAe,KAAKK,GAAL,CAAS,CAAT,IAAcV,EAA7B;AACD;;;;;;mBAIY4J,K;;;;;;;;;;;;;AC9Bf;;;;AACA;;KAAYlL,S;;AACZ;;KAAYF,O;;;;;;AAEZ,KAAM6K,aAAa,SAAbA,UAAa,GAAM;AACvB,OAAIrH,KAAKC,MAAL,KAAgB,GAApB,EAAyB;AACvB,YAAO,CAAC,CAAR;AACD;AACD,UAAO,CAAP;AACD,EALD;;AAOO,KAAM4B,4BAAU,SAAVA,OAAU;AAAA,UAAQ,oBAAU;AACrC9B,WAAM,OAD+B;AAErC1B,UAAK,CAAC,GAAD,EAAM,CAAN,CAFgC;AAGrCa,cAAS,CAAC,GAAD,EAAM,CAAN,CAH4B;AAIrCR,UAAK,CAAC,CAAD,EAAI,CAAJ,CAJgC;AAKrCI,aAAQtC,QAAQyC;AALqB,IAAV,CAAR;AAAA,EAAhB,C;;;;;;;;;;;;;;ACXP;;KAAYvC,S;;;;;;KAENmL,K;AACJ,kBAAYhD,IAAZ,EAAkB;AAAA;;AAAA,SACR9E,IADQ,GAC4B8E,IAD5B,CACR9E,IADQ;AAAA,SACF1B,GADE,GAC4BwG,IAD5B,CACFxG,GADE;AAAA,SACGK,GADH,GAC4BmG,IAD5B,CACGnG,GADH;AAAA,SACQI,MADR,GAC4B+F,IAD5B,CACQ/F,MADR;AAAA,SACgBI,OADhB,GAC4B2F,IAD5B,CACgB3F,OADhB;;AAEhB,UAAKa,IAAL,GAAYA,IAAZ;AACA,UAAK1B,GAAL,GAAWA,GAAX;AACA,UAAKa,OAAL,GAAeA,OAAf;AACA,UAAKR,GAAL,GAAWA,GAAX;AACA,UAAKI,MAAL,GAAcA,MAAd;;AAEA,UAAKiC,MAAL,GAAc,KAAKA,MAAL,CAAYlE,IAAZ,CAAiB,IAAjB,CAAd;AACA,UAAKG,MAAL,GAAc,KAAKA,MAAL,CAAYH,IAAZ,CAAiB,IAAjB,CAAd;AACD;;;;8BAEQ;AAAA,WACCwB,GADD,GACiB,IADjB,CACCA,GADD;AAAA,WACMS,MADN,GACiB,IADjB,CACMA,MADN;;AAEP,cAAO,CACLT,IAAI,CAAJ,IAAS,EADJ,EAELA,IAAI,CAAJ,IAAS,EAFJ,EAGL,EAHK,EAIL,EAJK,CAAP;AAMD;;;4BAEML,E,EAAI;AACT,YAAKkB,OAAL,CAAa,CAAb,IAAkB,KAAKb,GAAL,CAAS,CAAT,CAAlB;AACA,YAAKa,OAAL,CAAa,CAAb,IAAkB,KAAKb,GAAL,CAAS,CAAT,CAAlB;AACA,YAAKK,GAAL,CAAS,CAAT,KAAehC,UAAUyC,OAAV,GAAoBnB,EAAnC;AACA,YAAKK,GAAL,CAAS,CAAT,KAAe,KAAKK,GAAL,CAAS,CAAT,IAAcV,EAA7B;AACA,YAAKK,GAAL,CAAS,CAAT,KAAe,KAAKK,GAAL,CAAS,CAAT,IAAcV,EAA7B;AACD;;;;;;mBAKY6J,K","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 968ad770915ef041d0be\n **/","import Resources from './Resources';\nimport Player from './Player';\nimport Crate from './Crate';\nimport Sprite from './Sprite';\nimport Input from './Input';\nimport * as ENEMIES from './util/ENEMIES';\nimport * as SPRITES from './util/SPRITES';\nimport * as STAGES from './util/STAGES';\nimport * as CONSTANTS from './util/CONSTANTS';\n\nclass SuperCrateBox {\n  constructor() {\n    this.play = this.play.bind(this);\n    this.main = this.main.bind(this);\n    this._reset = this._reset.bind(this);\n    this.update = this.update.bind(this);\n    this.render = this.render.bind(this);\n    this._getRect = this._getRect.bind(this);\n    this.handleInput = this.handleInput.bind(this);\n    this.renderEntity = this.renderEntity.bind(this);\n    this._isReadyToJump = this._isReadyToJump.bind(this);\n    this.updateEntities = this.updateEntities.bind(this);\n    this.renderEntities = this.renderEntities.bind(this);\n    this.checkCollision = this.checkCollision.bind(this);\n    this.checkCollisions = this.checkCollisions.bind(this);\n    this.checkPlayerBounds = this.checkPlayerBounds.bind(this);\n  }\n\n  play() {\n    this.lastTime = Date.now();\n    this._setup();\n  }\n\n  main() {\n    if (this.gameOver) {\n      this._reset();\n      return;\n    }\n    const { update, render } = this;\n    const now = Date.now();\n    const dt = (now - this.lastTime) / 1000.0;\n\n    update(dt);\n    render();\n\n    this.lastTime = now;\n    requestAnimationFrame(this.main);\n  }\n\n  update(dt) {\n    this.handleInput(dt);\n    this.updateEntities(dt);\n    this.checkCollisions([ this.player, this.crate, this.enemies[0] ]);\n    this.checkPlayerBounds();\n  }\n\n  checkPlayerBounds() {\n    if (this.player.pos[1] > 570) {\n      this.gameOver = true;\n    }\n  }\n\n  handleInput(dt) {\n    const input = window.input;\n\n    if (input.isDown('UP') || input.isDown('SPACE')) {\n      if (this._isReadyToJump()) {\n        this.player.isJumping = true;\n        this.player.vel[1] = CONSTANTS.PLAYER_VERTICAL_INIT_VEL;\n      }\n    }\n\n    if (input.isDown('LEFT')) {\n      if (this.player.vel[0] > -CONSTANTS.PLAYER_HORIZONTAL_VEL) {\n        this.player.vel[0] -= (CONSTANTS.PLAYER_HORIZONTAL_ACC * dt);\n      } else {\n        this.player.vel[0] = -CONSTANTS.PLAYER_HORIZONTAL_VEL;\n      }\n    } else if (input.isDown('RIGHT')) {\n      if (this.player.vel[0] < CONSTANTS.PLAYER_HORIZONTAL_VEL) {\n        this.player.vel[0] += (CONSTANTS.PLAYER_HORIZONTAL_ACC * dt);\n      } else {\n        this.player.vel[0] = CONSTANTS.PLAYER_HORIZONTAL_VEL;\n      }\n    } else {\n      this.player.vel[0] = 0;\n    }\n\n    const { vel } = this.player;\n    if (vel[0] > 0) {\n      this.player.sprite = SPRITES.PLAYER_RUN_RIGHT;\n    } else if (vel[0] < 0) {\n      this.player.sprite = SPRITES.PLAYER_RUN_LEFT;\n    } else {\n      this.player.sprite = SPRITES.PLAYER_IDLE;\n    }\n\n    this.player.lastPos[0] = this.player.pos[0];\n    this.player.lastPos[1] = this.player.pos[1];\n    this.player.vel[1] += CONSTANTS.GRAVITY * dt;\n    this.player.pos[0] += this.player.vel[0] * dt;\n    this.player.pos[1] += this.player.vel[1] * dt;\n  }\n\n  checkCollision(entity) {\n    const walls = this.stage;\n    const { enemies, crate } = this;\n    const collisionMap = [ ...walls, ...enemies, crate ];\n\n    const rect1 = this._getRect(entity);\n    for (let i = 0; i < collisionMap.length; i++) {\n      const otherEntity = collisionMap[i];\n      const rect2 = this._getRect(otherEntity);\n\n      const collisionType = this._collisionDetected(rect1, rect2);\n      if (collisionType) {\n        if (entity.type === 'enemy') {\n          entity.vel[0] = Math.random() > 0.3 ? -100 : 0;\n          entity.vel[1] = Math.random() > 0.4 ? -450 : 0;\n        }\n\n        if (otherEntity.type === 'wall') {\n          this._entityHitWall(entity, collisionType);\n        }\n\n        if (entity.type === 'player' && otherEntity.type === 'crate') {\n          this.score++;\n          if (this.score > 9) {\n            this.scoreEl.className = 'double_digits';\n          }\n          this.crate = new Crate({\n            pos: [-100, -100],\n            vel: [0, 0],\n            sprite: SPRITES.CRATE\n          });\n          setTimeout(() => {\n              this.crate = new Crate({\n              pos: STAGES.STAGE_1_CRATE_SPAWN(),\n              vel: [0, 10],\n              sprite: SPRITES.CRATE\n            });\n          }, 500);\n        }\n\n      }\n    }\n    return null;\n  }\n\n  checkCollisions(list) {\n    for (let i = 0; i < list.length; i++) {\n      this.checkCollision(list[i]);\n    }\n  }\n\n  updateEntities(dt) {\n    this.player.sprite.update(dt);\n    this.crate.update(dt);\n    for (let i = 0; i < this.enemies.length; i++) {\n      this.enemies[i].update(dt);\n    }\n  }\n\n  render() {\n    const {\n      renderEntity,\n      renderEntities,\n      player,\n      enemies,\n      stage,\n      crate,\n      ctx,\n      score\n    } = this;\n    this.scoreEl.innerHTML = this.score;\n    this.velocityEl.innerHTML = `V: ${this.player.vel[0].toFixed(0)}, ${this.player.vel[1].toFixed(0)}`;\n    this.positionEl.innerHTML = `P: ${this.player.hitbox()[0].toFixed(0)}, ${this.player.hitbox()[1].toFixed(0)}`;\n    ctx.clearRect(0, 0, 900, 600);\n    renderEntity(player);\n    renderEntities(enemies);\n    renderEntity(crate);\n    renderEntities(stage);\n  }\n\n  renderEntity(entity) {\n    const { ctx } = this;\n    ctx.save();\n    ctx.translate(entity.pos[0], entity.pos[1]);\n    entity.sprite.render(ctx);\n    ctx.restore();\n  }\n\n  renderEntities(list) {\n    for (let i = 0; i < list.length; i++) {\n      this.renderEntity(list[i]);\n    }\n  }\n\n  // private\n  _reset() {\n    this.gameOver = false;\n    this.score = 0;\n    this.scoreEl.className = 'single_digits';\n\n    this.player = new Player({\n      type: 'player',\n      pos: [450, 300],\n      lastPos: [450, 300],\n      vel: [0, 0],\n      sprite: SPRITES.PLAYER_IDLE\n    });\n\n    this.enemies = [];\n    this.crate = new Crate({\n      pos: STAGES.STAGE_1_CRATE_SPAWN(),\n      vel: [0, 10],\n      sprite: SPRITES.CRATE\n    });\n    this.stage = STAGES.STAGE_1;\n\n    this.main();\n  }\n\n  _setup() {\n    // set game state;\n    this.gameOver = false;\n\n    // makes reference to canvas\n    const canvas = document.getElementById('canvas');\n    this.ctx = canvas.getContext('2d');\n\n    // loads resources\n    Resources.load([\n      './lib/img/jay.png',\n      './lib/img/crate.png'\n    ]);\n    const init = () => {\n      this.main();\n    };\n    Resources.onReady(init);\n\n    // Sets event listeners\n    Input.setup();\n\n    // sets game state\n    this.player = new Player({\n      type: 'player',\n      pos: [450, 300],\n      lastPos: [450, 300],\n      vel: [0, 0],\n      sprite: SPRITES.PLAYER_IDLE\n    });\n\n    this.enemies = [ ENEMIES.ENEMY_1() ];\n    this.crate = new Crate({\n      pos: STAGES.STAGE_1_CRATE_SPAWN(),\n      vel: [0, 10],\n      sprite: SPRITES.CRATE\n    });\n    this.stage = STAGES.STAGE_1;\n\n    this.score = 0;\n    this.scoreEl = document.getElementById('score');\n    this.scoreEl.className = 'single_digits';\n    this.velocityEl = document.getElementById('velocity');\n    this.positionEl = document.getElementById('position');\n    this.collisionEl = document.getElementById('collision');\n  }\n\n  _getRect(entity) {\n    const hitbox = entity.hitbox(this.ctx);\n\n    return {\n      x: hitbox[0], y: hitbox[1], width: hitbox[2], height: hitbox[3]\n    };\n  }\n\n  _isReadyToJump() {\n    const jumpTiming = Date.now() - this.player.lastJumpTime;\n    return jumpTiming >= CONSTANTS.JUMP_TIME;\n  }\n\n  _collisionDetected(rect1, rect2) {\n    const {\n      _collisionRight,\n      _collisionLeft,\n      _collisionTop,\n      _collisionBottom\n    } = this;\n\n    if (rect1.x < rect2.x + rect2.width &&\n        rect1.x + rect1.width > rect2.x &&\n        rect1.y < rect2.y + rect2.height &&\n        rect1.height + rect1.y > rect2.y) {\n          const l = _collisionLeft(rect1, rect2);\n          const r = _collisionRight(rect1, rect2);\n          const t = _collisionTop(rect1, rect2);\n          const b = _collisionBottom(rect1, rect2);\n\n          if ( t && b ) {\n            return 'top-bottom';\n          } else if (l && t) {\n            return 'left-top';\n          } else if (l && b ) {\n            return 'left-bottom';\n          } else if (r && t) {\n            return 'right-top';\n          } else if (r && b) {\n            return 'right-bottom';\n          } else if (l) {\n            return 'left';\n          } else if (r) {\n            return 'right';\n          } else if (t) {\n            return 'top';\n          } else if (b) {\n            return 'bottom';\n          }\n\n    }\n  }\n\n  _collisionRight(rect1, rect2) {\n    const leftSideOf1 = rect1.x;\n    const rightSideOf1 = rect1.x + rect1.width;\n    const leftSideOf2 = rect2.x;\n    const rightSideOf2 = rect2.x + rect2.width;\n    return rightSideOf1 > leftSideOf2 && leftSideOf1 < leftSideOf2;\n  }\n\n  _collisionLeft(rect1, rect2) {\n    const leftSideOf1 = rect1.x;\n    const rightSideOf1 = rect1.x + rect1.width;\n    const leftSideOf2 = rect2.x;\n    const rightSideOf2 = rect2.x + rect2.width;\n    return leftSideOf1 < rightSideOf2 && rightSideOf1 > rightSideOf2;\n  }\n\n  _collisionTop(rect1, rect2) {\n    const topSideOf1 = rect1.y;\n    const bottomSideOf1 = rect1.y + rect1.height;\n    const topSideOf2 = rect2.y;\n    const bottomSideOf2 = rect2.y + rect2.height;\n    return topSideOf1 < bottomSideOf2 && bottomSideOf1 > bottomSideOf2;\n  }\n\n  _collisionBottom(rect1, rect2) {\n    const topSideOf1 = rect1.y;\n    const bottomSideOf1 = rect1.y + rect1.height;\n    const topSideOf2 = rect2.y;\n    const bottomSideOf2 = rect2.y + rect2.height;\n    return bottomSideOf1 > topSideOf2 && topSideOf1 < topSideOf2;\n  }\n\n  _entityHitWall(entity, collisionType) {\n    if (entity.type === 'enemy') {\n      this.collisionEl.innerHTML = `C: ${collisionType}`;\n    }\n    switch(collisionType) {\n      case 'right':\n        entity.vel[0] = 0;\n        entity.pos[0] = entity.lastPos[0];\n        break;\n      case 'left':\n        entity.vel[0] = 0;\n        entity.pos[0] = entity.lastPos[0];\n        break;\n      case 'top':\n        entity.vel[1] = -entity.vel[1] * 0.25;\n        entity.pos[1] = entity.lastPos[1];\n        break;\n      case 'bottom':\n        entity.vel[1] = 0;\n        entity.pos[1] = entity.lastPos[1];\n        break;\n      case 'right-bottom':\n        if (entity.pos[0] > entity.lastPos[0]) {\n          entity.pos[0] = entity.lastPos[0];\n        }\n        if (entity.vel[0] === 0 && entity.vel[1] > 0) {\n          entity.pos[0] = entity.lastPos[0];\n        }\n        if (entity.pos[1] > entity.lastPos[1] &&\n           entity.vel[0] === 0) {\n          entity.pos[1] = entity.lastPos[1];\n          entity.vel[1] = 0;\n        }\n        if (entity.pos[1] > entity.lastPos[1] &&\n           entity.vel[1] > 0) {\n          entity.pos[1] = entity.lastPos[1] + 3;\n          entity.vel[1] = -entity.vel[1] * 0.25;\n        }\n        break;\n      case 'left-bottom':\n        if (entity.pos[0] < entity.lastPos[0]) {\n          entity.pos[0] = entity.lastPos[0];\n        }\n        if (entity.vel[0] === 0 && entity.vel[1] > 0) {\n          entity.pos[0] = entity.lastPos[0];\n        }\n        if (entity.pos[1] > entity.lastPos[1] &&\n           entity.vel[0] === 0) {\n          entity.pos[1] = entity.lastPos[1];\n          entity.vel[1] = 0;\n        }\n        if (entity.pos[1] > entity.lastPos[1] &&\n           entity.vel[1] < 0) {\n          entity.pos[1] = entity.lastPos[1] + 3;\n          entity.vel[1] = -entity.vel[1] * 0.25;\n        }\n        break;\n      case 'right-top':\n        if (entity.vel[0] > 0) {\n          entity.vel[0] = 0;\n        }\n        if (entity.pos[0] > entity.lastPos[0]) {\n          entity.pos[0] = entity.lastPos[0];\n        }\n        if (entity.vel[1] < 0) {\n          entity.pos[1] = entity.lastPos[1];\n          entity.vel[1] = -entity.vel[1] * 0.25;\n        }\n        break;\n      case 'left-top':\n        if (entity.vel[0] < 0) {\n          entity.vel[0] = 0;\n        }\n        if (entity.pos[0] < entity.lastPos[0]) {\n          entity.pos[0] = entity.lastPos[0];\n        }\n        if (entity.vel[1] < 0) {\n          entity.pos[1] = entity.lastPos[1];\n          entity.vel[1] = -entity.vel[1] * 0.25;\n        }\n        break;\n      case 'top-bottom':\n        entity.pos[0] = entity.lastPos[0];\n        break;\n    }\n  }\n\n}\n\nconst scb = new SuperCrateBox();\ndocument.addEventListener('DOMContentLoaded', () => scb.play());\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/SuperCrateBox.js\n **/","class Resources {\n  constructor() {\n    this.resourceCache = {};\n    this.loading = [];\n    this.readyCallbacks = [];\n\n    this.load = this.load.bind(this);\n    this._load = this._load.bind(this);\n    this.get = this.get.bind(this);\n    this.isReady = this.isReady.bind(this);\n    this.onReady = this.onReady.bind(this);\n  }\n\n  load(arg) {\n    const { _load } = this;\n    arg.forEach(url => _load(url));\n  }\n\n  get(url) {\n    return this.resourceCache[url];\n  }\n\n  isReady() {\n    const { resourceCache } = this;\n    let ready = true;\n    for (let k in resourceCache) {\n      if (resourceCache.hasOwnProperty(k) && !resourceCache[k]) {\n        ready = false;\n      }\n    }\n    return ready;\n  }\n\n  onReady(func) {\n    this.readyCallbacks.push(func);\n  }\n\n  // private\n\n  _load(url) {\n    const { resourceCache, readyCallbacks, isReady } = this;\n\n    if (resourceCache[url]) {\n      return resourceCache[url];\n    } else {\n      const img = new Image();\n      img.onload = () => {\n        resourceCache[url] = img;\n\n        if (isReady()) {\n          readyCallbacks.forEach(callback => callback());\n        }\n      };\n      resourceCache[url] = false;\n      img.src = url;\n    }\n  }\n\n}\n\nconst { load, get, onReady, isReady } = new Resources();\nexport default {\n  load: load,\n  get: get,\n  onReady: onReady,\n  isReady: isReady\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Resources.js\n **/","class Player {\n  constructor(opts) {\n    const { pos, vel, sprite, lastPos } = opts;\n    this.type = 'player';\n    this.pos = pos;\n    this.lastPos = lastPos;\n    this.vel = vel;\n    this.sprite = sprite;\n    this.isJumping = false;\n    this.jumpNumber = 0;\n    this.lastJumpTime = Date.now();\n\n    this.hitbox = this.hitbox.bind(this);\n  }\n\n  hitbox() {\n    const { pos, sprite } = this;\n    return [\n      pos[0] + 20,\n      pos[1] + 15,\n      27,\n      49\n    ];\n  }\n}\n\nexport default Player;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Player.js\n **/","import Resources from './Resources.js';\n\nclass Sprite {\n  constructor(opts) {\n    const { pos, size, speed, frames, url, dir, once, facing } = opts;\n    this.pos = pos;\n    this.size = size;\n    this.speed = typeof speed === 'number' ? speed : 0;\n    this.frames = frames;\n    this.url = url;\n    this.dir = dir;\n    this.once = once;\n    this._index = 0;\n    this.facing = facing;\n\n    this.update = this.update.bind(this);\n    this.render = this.render.bind(this);\n  }\n\n  update(dt) {\n    const { speed } = this;\n    this._index += speed * dt;\n  }\n\n  render(ctx) {\n    const { speed, frames, pos, size, once, _index, dir, url, facing } = this;\n    let frame;\n\n    if (speed > 0) {\n      const max = this.frames.length;\n      // idx is the ith picture\n      const idx = Math.floor(_index);\n      frame = frames[idx % max];\n\n      if (once && idx >= max) {\n        this.done = true;\n        return;\n      }\n    } else {\n      frame = frames[0];\n    }\n\n    let x = pos[0];\n    let y = pos[1];\n\n    if (dir === 'vertical') {\n      y += frame * size[1];\n    } else {\n      x += frame * size[0];\n    }\n\n    if (facing === 'left') {\n      ctx.translate(size[0], 0);\n      ctx.scale(-1, 1);\n    }\n    \n\n    ctx.drawImage(\n      Resources.get(url),\n      x, y,\n      size[0], size[1],\n      0, 0,\n      size[0], size[1]\n    );\n  }\n}\n\nexport default Sprite;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Sprite.js\n **/","class Input {\n  constructor() {\n    this.pressedKeys = {};\n\n    this.setKey = this.setKey.bind(this);\n  }\n\n  setup() {\n    const { setKey } = this;\n    document.addEventListener('keydown', e => setKey(e, true));\n    document.addEventListener('keyup', e => setKey(e, false));\n    // window.addEventListener('blur', () => { this.pressedKeys = {}; });\n    window.input = {\n      isDown: key => this.pressedKeys[key.toUpperCase()],\n    };\n\n    window.addEventListener(\"keydown\", e => {\n    // prevent scrolling with arrow keys\n    if([32, 37, 38, 39, 40].indexOf(e.keyCode) > -1) {\n        e.preventDefault();\n    }\n}, false);\n\n  }\n\n  setKey(event, status) {\n    const code = event.keyCode;\n    let key;\n\n    switch(code) {\n      case 32:\n        key = 'SPACE';\n        break;\n      case 37:\n        key = 'LEFT';\n        break;\n      case 38:\n        key = 'UP';\n        break;\n      case 39:\n        key = 'RIGHT';\n        break;\n      case 40:\n        key = 'DOWN';\n        break;\n      default:\n        key = String.fromCharCode(code);\n    }\n\n    this.pressedKeys[key] = status;\n  }\n}\n\nexport default new Input();\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Input.js\n **/","import Sprite from '../Sprite';\n\nexport const PLAYER_IDLE = new Sprite({\n  url: './lib/img/jay.png',\n  pos: [0, 0],\n  frames: [\n    0, 1, 1, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3,\n    3, 3, 2, 2, 1, 1, 0, 0, 0, 0, 0, 0, 0\n  ],\n  size: [64, 64],\n  speed: 24,\n  dir: 'horizontal',\n  once: false,\n  facing: 'right'\n});\n\n\nexport const PLAYER_RUN_RIGHT = new Sprite({\n  url: './lib/img/jay.png',\n  pos: [0, 0],\n  frames: [5, 6, 7, 8, 9, 8, 7, 6],\n  size: [64, 64],\n  speed: 18,\n  dir: 'horizontal',\n  once: false,\n  facing: 'right'\n});\n\n\nexport const PLAYER_RUN_LEFT = new Sprite({\n  url: './lib/img/jay.png',\n  pos: [0, 0],\n  frames: [6, 7, 8, 9, 8, 7, 6, 5],\n  size: [64, 64],\n  speed: 18,\n  dir: 'horizontal',\n  once: false,\n  facing: 'left'\n});\n\n\nexport const PLAYER_JUMP_RIGHT = new Sprite({\n  url: './lib/img/jay.png',\n  pos: [0, 0],\n  frames: [10, 11, 11, 12, 12, 12, 12, 12, 12, 12],\n  size: [64, 64],\n  speed: 24,\n  dir: 'horizontal',\n  once: true,\n  facing: 'right'\n});\n\nexport const PLAYER_JUMP_LEFT = new Sprite({\n  url: './lib/img/jay.png',\n  pos: [0, 0],\n  frames: [10, 11, 11, 12, 12, 12, 12, 12, 12, 12],\n  size: [64, 64],\n  speed: 24,\n  dir: 'horizontal',\n  once: true,\n  facing: 'left'\n});\n\nexport const CRATE = new Sprite({\n  url: './lib/img/crate.png',\n  pos: [0, 0],\n  frames: [0],\n  size: [20, 20],\n  speed: 1,\n  dir: 'horizontal',\n  once: false,\n  facing: 'right'\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/util/SPRITES.js\n **/","import Wall from '../Wall';\n\n// WALL_THICKNESS\nconst WT = 30;\n\n// constants related to stage 1\nconst SLW1 = 170;   // SIDE_LEDGE_WIDTH_1\nconst MLW1 = 300;   // MID_LEDGE_WIDTH_1\nconst HO1 = 20;     // HEIGHT_OFFSET_1\nconst OW1 = 150;    // OPENING_WIDTH_1\n\nexport const STAGE_1 = [\n  // top walls\n  new Wall({\n    pos: [WT, 0],\n    size: [450 - (OW1 / 2) - WT, WT]\n  }),\n  new Wall({\n    pos: [450 + (OW1 / 2), 0],\n    size: [450 - (OW1 / 2) - WT, WT]\n  }),\n\n  // bottom walls\n  new Wall({\n    pos: [WT, 600 - WT],\n    size: [450 - (OW1 / 2) - WT, WT]\n  }),\n  new Wall({\n    pos: [450 + (OW1 / 2), 600 - WT],\n    size: [450 - (OW1 / 2) - WT, WT]\n  }),\n\n  // left wall\n  new Wall({\n    pos: [0, 0],\n    size: [WT, 600]\n  }),\n\n  // right wall\n  new Wall({\n    pos: [900 - WT, 0],\n    size: [WT, 600]\n  }),\n\n  // left ledge\n  new Wall({\n    pos: [WT, 300 - HO1],\n    size: [SLW1, WT]\n  }),\n\n  // right ledge\n  new Wall({\n    pos: [900 - WT - SLW1, 300 - HO1],\n    size: [SLW1, WT]\n  }),\n\n  // bottom-middle ledge\n  new Wall({\n    pos: [SLW1 + WT + 100, 400 - HO1],\n    size: [MLW1, WT]\n  }),\n\n  // upper-middle ledge\n  new Wall({\n    pos: [SLW1 + WT + 100, 170 - HO1],\n    size: [MLW1, WT]\n  }),\n\n  new Wall({\n    pos: [0, -WT - 25],\n    size: [900, WT]\n  })\n];\n\nexport const STAGE_1_CRATE_SPAWN = () => {\n  const sample = max => Math.floor(Math.random() * max);\n  const seed = [\n    [110, 230],\n    [120, 230],\n    [100, 230],\n    [90, 230],\n    [440, 330],\n    [450, 330],\n    [430, 330],\n    [420, 330],\n    [180, 520],\n    [190, 520],\n    [170, 520],\n    [160, 520],\n    [690, 520],\n    [780, 230],\n    [790, 230],\n    [770, 230],\n    [760, 230],\n    [440, 100],\n    [450, 100],\n    [430, 100],\n    [420, 100]\n  ][sample(21)];\n  let multiplier = 1;\n  if (Math.random() > 0.5) {\n    multiplier = -1;\n  }\n  return [ (seed[0] + (multiplier * sample(10))), seed[1] ];\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/util/STAGES.js\n **/","import WallSprite from './WallSprite';\n\nclass Wall {\n  constructor(opts) {\n    const { pos, size } = opts;\n    this.type = 'wall';\n    this.size = size;\n    this.pos = pos;\n    this.sprite = new WallSprite(size);\n\n    this.hitbox = this.hitbox.bind(this);\n  }\n\n  hitbox() {\n    const { pos, size } = this;\n    return [].concat(pos).concat(size);\n  }\n}\n\nexport default Wall;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Wall.js\n **/","import Resources from './Resources';\n\nclass WallSprite {\n  constructor(size) {\n    this.size = size;\n  }\n\n  render(ctx) {\n    const { size } = this;\n    // const pattern = ctx.createPattern(\n    //   Resources.get('./lib/img/brick.png'),\n    //   'repeat'\n    // );\n    // ctx.fillStyle = pattern;\n    ctx.fillStyle = 'black';\n    ctx.fillRect(0, 0, size[0], size[1]);\n    // ctx.strokeStyle = 'red';\n    // ctx.strokeRect(0, 0, size[0], size[1]);\n  }\n}\n\nexport default WallSprite;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/WallSprite.js\n **/","export const PLAYER_HORIZONTAL_VEL = 375; // px/sec\nexport const PLAYER_HORIZONTAL_ACC = 6000; // px/sec^2\nexport const PLAYER_VERTICAL_INIT_VEL = -500;\nexport const GRAVITY = 1400; // px/sec^2\nexport const JUMP_TIME = 0; //millisec\nexport const ENEMY_ONE_VEL = 50;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/util/CONSTANTS.js\n **/","import { GRAVITY } from './util/CONSTANTS';\n\nclass Crate {\n  constructor(opts) {\n    const { pos, vel, sprite } = opts;\n    this.type = 'crate';\n    this.pos = pos;\n    this.lastPos = pos;\n    this.vel = vel;\n    this.sprite = sprite;\n\n    this.update = this.update.bind(this);\n    this.hitbox = this.hitbox.bind(this);\n  }\n\n  hitbox() {\n    const { pos, sprite } = this;\n    return [].concat(pos).concat(sprite.size);\n  }\n\n  update(dt) {\n    this.lastPos[1] = this.pos[1];\n    if (this.vel[1] !== 0) {\n      this.vel[1] += GRAVITY * dt;\n    }\n    this.pos[1] += this.vel[1] * dt;\n  }\n\n}\n\nexport default Crate;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Crate.js\n **/","import Enemy from '../Enemy';\nimport * as CONSTANTS from './CONSTANTS';\nimport * as SPRITES from './SPRITES';\n\nconst multiplier = () => {\n  if (Math.random() > 0.5) {\n    return -1;\n  }\n  return 1;\n};\n\nexport const ENEMY_1 = () => ( new Enemy({\n    type: 'enemy',\n    pos: [450, 0],\n    lastPos: [450, 0],\n    vel: [0, 0],\n    sprite: SPRITES.PLAYER_IDLE\n  })\n);\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/util/ENEMIES.js\n **/","import * as CONSTANTS from './util/CONSTANTS';\n\nclass Enemy {\n  constructor(opts) {\n    const { type, pos, vel, sprite, lastPos } = opts;\n    this.type = type;\n    this.pos = pos;\n    this.lastPos = lastPos;\n    this.vel = vel;\n    this.sprite = sprite;\n\n    this.hitbox = this.hitbox.bind(this);\n    this.update = this.update.bind(this);\n  }\n\n  hitbox() {\n    const { pos, sprite } = this;\n    return [\n      pos[0] + 20,\n      pos[1] + 15,\n      27,\n      49\n    ];\n  }\n\n  update(dt) {\n    this.lastPos[0] = this.pos[0];\n    this.lastPos[1] = this.pos[1];\n    this.vel[1] += CONSTANTS.GRAVITY * dt;\n    this.pos[0] += this.vel[0] * dt;\n    this.pos[1] += this.vel[1] * dt;\n  }\n\n\n}\n\nexport default Enemy;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/Enemy.js\n **/"],"sourceRoot":""}